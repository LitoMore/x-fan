{"version":3,"sources":["pages/assets/github.svg","utils/account.js","utils/fanfou.js","config/fanfou.config.js","rematch/user.js","rematch/home-timeline.js","rematch/settings.js","pages/login/index.js","pages/messages/index.js","pages/settings/index.js","app.js","service-worker.js","index.js"],"names":["module","exports","__webpack_require__","p","getAccounts","accounts","JSON","parse","localStorage","getItem","error","opt","consumerKey","consumerSecret","apiDomain","oauthDomain","hooks","baseString","baseStr","replace","xauth","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","username","password","x","token","oauthToken","oauthTokenSecret","o","profile","wrap","_context","prev","next","Fanfou","objectSpread","sent","get","abrupt","stop","_x","_x2","apply","this","arguments","initFanfou","length","_user$token","slicedToArray","getHomeTimeline","format","count","postStatus","ff","photo","upload","post","user","state","reducers","addAccount","auth","slice","filter","item","unique_id","unshift","setItem","stringify","logout","effects","login","_login","account","ignoredStatus","text","indexOf","Number","isInteger","homeTimeline","loading","sending","typing","timeline","setLoading","setSending","setTimeline","appendStatus","status","concat","clearTimeline","fetch","_fetch","tl","latestTimeline","_latestTimeline$slice","_latestTimeline$slice2","_latestTimeline$slice3","lastStatusId","messages","latest","last","letterCount","time","_this","header","avatar","reverse","rawId","isOrigin","rawid","forEach","push","id","type","is_self","profile_image_url_large","name","image","originurl","plain_text","parseInt","setTimeout","_post","_callee2","_context2","_x3","localSettings","settings","updateSettings","FanfouLogin","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","_this$state","$f7","dialog","alert","$f7router","navigate","clearPreviousHistory","_this2","react_default","createElement","framework7_react_esm","noToolbar","noNavbar","noSwipeback","loginScreen","form","label","placeholder","onInput","e","setState","target","value","onClick","React","Component","defaultProps","connect","_state$user$accounts$","current","dispatch","FanfouMessages","sendMessage","params","result","messagebar","getValue","file","document","querySelector","clear","t0","photos","messageText","timer","setInterval","self","$f7ready","messagebarComponent","f7Messagebar","messagesComponent","f7Messages","clearInterval","message","index","previousMessage","isTitle","nextMessage","_this3","_this$props","messageStyle","window","innerWidth","maxWidth","accept","style","display","onChange","fileDOM","files","reader","FileReader","addEventListener","url","readAsDataURL","ref","el","photoBrowser","navbar","toolbar","onPhotoBrowserClose","attachmentsVisible","Boolean","sheetVisible","iconAurora","iconIos","iconMd","slot","click","onAttachmentDelete","scrollMessagesOnEdge","map","key","first","isFirstMessage","isLastMessage","tail","isTailMessage","onClickBubble","open","FanfouSettings","main","backLink","title","color","back","force","removeItem","textAlign","external","href","alt","src","githubBadge","f7Params","routes","path","component","Messages","Login","theme","navigator","platform","FanfouApp","isLocalhost","location","hostname","match","registerValidSW","swUrl","config","registration","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","checkValidServiceWorker","_callee3","response","_context3","headers","ready","unregister","reload","F7","use","F7React","store","init","models","ReactDOM","render","es","app","URL","process","origin"],"mappings":"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","file":"static/js/main.3b5876b1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/github.5a5753ed.svg\";","export const getAccounts = () => {\n\tlet accounts = [];\n\ttry {\n\t\taccounts = JSON.parse(localStorage.getItem('accounts'));\n\t} catch (error) {}\n\n\treturn accounts;\n};\n\nexport const addAccount = account => {\n\tconst accounts = getAccounts();\n\tconst found = accounts.find(item => {\n\t\treturn item.token.oauthToken === account.token.oauthToken && item.token.oauthTokenSecret === account.token.oauthTokenSecret;\n\t});\n\tif (found) {\n\t\treturn;\n\t}\n\n\taccounts.push(account);\n\tlocalStorage.setItem('accounts', JSON.stringify(accounts));\n};\n","import Fanfou from 'fanfou-sdk-browser';\nimport {consumerKey, consumerSecret} from '../config/fanfou.config';\nimport {getAccounts} from './account';\n\nconst apiDomain = 'cors.fanfou.com';\nconst oauthDomain = 'cors.fanfou.com';\nconst hooks = {\n\tbaseString: baseStr => {\n\t\treturn baseStr\n\t\t\t.replace('%2F%2Fcors.fanfou.com%2Foauth', 'http%3A%2F%2Ffanfou.com%2Foauth')\n\t\t\t.replace('%2F%2Fcors.fanfou.com', 'http%3A%2F%2Fapi.fanfou.com');\n\t}\n};\nconst opt = {consumerKey, consumerSecret, apiDomain, oauthDomain, hooks};\n\nexport const xauth = async (username, password) => {\n\tconst x = new Fanfou({\n\t\t...opt,\n\t\tusername,\n\t\tpassword\n\t});\n\tconst token = await x.xauth();\n\tconst {oauthToken, oauthTokenSecret} = token;\n\tif (oauthToken && oauthTokenSecret) {\n\t\tconst o = new Fanfou({\n\t\t\t...opt,\n\t\t\toauthToken,\n\t\t\toauthTokenSecret\n\t\t});\n\t\tconst profile = await o.get('/account/verify_credentials', {});\n\t\treturn {token, profile};\n\t}\n\n\treturn null;\n};\n\nconst initFanfou = () => {\n\tconst accounts = getAccounts();\n\tif (accounts.length === 0) {\n\t\treturn;\n\t}\n\n\tconst [user] = accounts;\n\tconst {oauthToken, oauthTokenSecret} = user.token;\n\tconst ff = new Fanfou({\n\t\t...opt,\n\t\toauthToken,\n\t\toauthTokenSecret\n\t});\n\treturn ff;\n};\n\nexport const getHomeTimeline = opt => {\n\tconst ff = initFanfou();\n\treturn ff.get('/statuses/home_timeline', {...opt, format: 'html', count: 30});\n};\n\nexport const postStatus = opt => {\n\tconst ff = initFanfou();\n\tif (opt.photo) {\n\t\treturn ff.upload('/photos/upload', {...opt});\n\t}\n\n\treturn ff.post('/statuses/update', {...opt});\n};\n","export const consumerKey = 'a59ed1e1d9c84ece4d90a6bef1ef30b2';\nexport const consumerSecret = 'aba384864b00fe9f3ed8ece4d21556cd';\n","import {xauth} from '../utils/fanfou';\n\n// Read accounts from localStorage\nlet accounts = [];\ntry {\n\taccounts = JSON.parse(localStorage.getItem('accounts')) || [];\n} catch (error) {}\n\nexport const user = {\n\tstate: {accounts},\n\treducers: {\n\t\taddAccount(state, auth) {\n\t\t\tlet accounts = state.accounts.slice();\n\t\t\taccounts = accounts.filter(item => {\n\t\t\t\treturn item.profile.unique_id !== auth.profile.unique_id;\n\t\t\t});\n\t\t\taccounts.unshift(auth);\n\t\t\tlocalStorage.setItem('accounts', JSON.stringify(accounts));\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taccounts\n\t\t\t};\n\t\t},\n\t\tlogout() {\n\t\t\treturn {\n\t\t\t\taccounts: []\n\t\t\t};\n\t\t}\n\t},\n\teffects: {\n\t\tasync login(account) {\n\t\t\tconst {username, password} = account;\n\t\t\tconst auth = await xauth(username, password);\n\t\t\tif (auth) {\n\t\t\t\tthis.addAccount(auth);\n\t\t\t}\n\n\t\t\treturn auth;\n\t\t}\n\t}\n};\n","import {getHomeTimeline, postStatus} from '../utils/fanfou';\n\nconst ignoredStatus = text => {\n\tconst ignoreList = ['', '.', '上传了新照片'];\n\tif (ignoreList.indexOf(text) >= 0) {\n\t\treturn true;\n\t}\n\n\tif (Number.isInteger(Number(text))) {\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n// Home Timeline\nexport const homeTimeline = {\n\tstate: {\n\t\tloading: null,\n\t\tsending: null,\n\t\ttyping: false,\n\t\ttimeline: []\n\t},\n\treducers: {\n\t\tsetLoading(state, loading) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading\n\t\t\t};\n\t\t},\n\t\tsetSending(state, sending) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsending\n\t\t\t};\n\t\t},\n\t\tsetTimeline(state, timeline) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimeline\n\t\t\t};\n\t\t},\n\t\tappendStatus(state, status) {\n\t\t\tconst timeline = state.timeline.concat(status);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimeline\n\t\t\t};\n\t\t},\n\t\tclearTimeline() {\n\t\t\treturn {\n\t\t\t\tloading: null,\n\t\t\t\tsending: null,\n\t\t\t\ttyping: false,\n\t\t\t\ttimeline: []\n\t\t\t};\n\t\t}\n\t},\n\teffects: {\n\t\tasync fetch(opt, state) {\n\t\t\tconst {timeline: tl} = state.homeTimeline;\n\t\t\tif (tl.length === 0) {\n\t\t\t\tthis.setLoading({\n\t\t\t\t\theader: 'Loading',\n\t\t\t\t\tavatar: '/x-fan.png'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Fetch the latest timeline state\n\t\t\tlet timeline = await getHomeTimeline(opt);\n\t\t\tconst {timeline: latestTimeline} = state.homeTimeline;\n\t\t\tconst [{rawId: lastStatusId} = {rawId: 0}] = latestTimeline.slice().reverse();\n\t\t\ttimeline = timeline.filter(status => status.isOrigin() && status.rawid > lastStatusId);\n\t\t\tlet messages = latestTimeline.slice();\n\n\t\t\ttimeline\n\t\t\t\t.reverse()\n\t\t\t\t.forEach(status => {\n\t\t\t\t\tif (status.photo) {\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tid: status.id + '-photo',\n\t\t\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\t\t\tavatar: status.user.profile_image_url_large,\n\t\t\t\t\t\t\tname: status.user.name,\n\t\t\t\t\t\t\timage: status.photo.originurl\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!ignoredStatus(status.text)) {\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tid: status.id,\n\t\t\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\t\t\tname: status.user.name,\n\t\t\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\t\t\ttext: status.plain_text,\n\t\t\t\t\t\t\tavatar: status.user.profile_image_url_large\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t// Only display 200 statuses\n\t\t\tmessages = messages.slice(-200);\n\n\t\t\tif (tl.length === 0) {\n\t\t\t\tthis.setLoading(null);\n\t\t\t\tthis.setTimeline(messages);\n\t\t\t} else {\n\t\t\t\tconst latest = messages[messages.length - 1].rawId;\n\t\t\t\tconst last = tl[tl.length - 1].rawId;\n\t\t\t\tif (latest > last) {\n\t\t\t\t\tconst letterCount = messages[messages.length - 1].text.length;\n\t\t\t\t\tconst time = 1000 + parseInt((letterCount + 1) / 140 * 4000, 10);\n\t\t\t\t\tthis.setLoading({\n\t\t\t\t\t\theader: messages[messages.length - 1].name,\n\t\t\t\t\t\tavatar: messages[messages.length - 1].avatar\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.setLoading(null);\n\t\t\t\t\t\tthis.setTimeline(messages);\n\t\t\t\t\t}, time);\n\t\t\t\t} else {\n\t\t\t\t\treturn messages;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn messages;\n\t\t},\n\t\tasync post(opt) {\n\t\t\tthis.setSending(opt);\n\t\t\tconst status = await postStatus({...opt});\n\t\t\tif (status.error) {\n\t\t\t\tthis.setSending(null);\n\t\t\t\treturn status;\n\t\t\t}\n\n\t\t\tconst messages = [];\n\t\t\tif (status.photo) {\n\t\t\t\tmessages.push({\n\t\t\t\t\tid: status.id + '-photo',\n\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\tavatar: status.user.profile_image_url_large,\n\t\t\t\t\tname: status.user.name,\n\t\t\t\t\timage: status.photo.originurl\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!ignoredStatus(status.text)) {\n\t\t\t\tmessages.push({\n\t\t\t\t\tid: status.id,\n\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\tname: status.user.name,\n\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\ttext: status.plain_text,\n\t\t\t\t\tavatar: status.user.profile_image_url_large\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.setSending(null);\n\t\t\tthis.appendStatus(messages);\n\t\t\treturn messages;\n\t\t}\n\t}\n};\n","const defaultSettings = {};\n\n// Get settings from localStorage\nlet localSettings = {};\ntry {\n\tlocalSettings = JSON.parse(localStorage.getItem('settings') || {});\n} catch (error) {}\n\nexport const settings = {\n\tstate: {\n\t\t...defaultSettings,\n\t\t...localSettings\n\t},\n\treducers: {\n\t\tupdateSettings(state) {\n\t\t\tlocalStorage.setItem('settings', JSON.stringify(state));\n\t\t\treturn state;\n\t\t}\n\t},\n\teffects: {}\n};\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {Page, LoginScreenTitle, List, ListInput, ListButton, BlockFooter} from 'framework7-react';\n\nclass FanfouLogin extends React.Component {\n\tstatic propTypes = {\n\t\tlogin: PropTypes.func\n\t}\n\n\tstatic defaultProps = {\n\t\tlogin: () => {}\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tusername: '',\n\t\t\tpassword: ''\n\t\t};\n\t}\n\n\tlogin = async () => {\n\t\tconst {username, password} = this.state;\n\t\tconst {login} = this.props;\n\t\tconst auth = await login({username, password});\n\n\t\tif (!(username && password)) {\n\t\t\tthis.$f7.dialog.alert('Username and password do not match');\n\t\t\treturn;\n\t\t}\n\n\t\tif (auth === null) {\n\t\t\tthis.$f7.dialog.alert('Username and password do not match');\n\t\t} else {\n\t\t\tthis.$f7router.navigate('/messages/', {\n\t\t\t\tclearPreviousHistory: true\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page noToolbar noNavbar noSwipeback loginScreen>\n\t\t\t\t<LoginScreenTitle>X-FAN</LoginScreenTitle>\n\t\t\t\t<List form>\n\t\t\t\t\t<ListInput\n\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Your username\"\n\t\t\t\t\t\tonInput={e => {\n\t\t\t\t\t\t\tthis.setState({username: e.target.value});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<ListInput\n\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Your password\"\n\t\t\t\t\t\tonInput={e => {\n\t\t\t\t\t\t\tthis.setState({password: e.target.value});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</List>\n\t\t\t\t<List>\n\t\t\t\t\t<ListButton onClick={this.login}>Sign In</ListButton>\n\t\t\t\t\t{/* eslint-disable-next-line */}\n\t\t\t\t\t<BlockFooter>Code with ❤️️ by LitoMore</BlockFooter>\n\t\t\t\t</List>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\tconst [current = {}] = state.user.accounts;\n\treturn {\n\t\tcurrent\n\t};\n};\n\nconst mapDispatch = dispatch => {\n\treturn {\n\t\tlogin: account => dispatch.user.login(account)\n\t};\n};\n\nexport default connect(mapState, mapDispatch)(FanfouLogin);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {Page, Messages, Message, Messagebar, Link, MessagebarAttachments, MessagebarAttachment, PhotoBrowser} from 'framework7-react';\n\nclass FanfouMessages extends React.Component {\n\tstatic propTypes = {\n\t\tloading: PropTypes.object,\n\t\tsending: PropTypes.object,\n\t\tmessages: PropTypes.array,\n\t\tfetch: PropTypes.func,\n\t\tpost: PropTypes.func\n\t}\n\n\tstatic defaultProps = {\n\t\tloading: null,\n\t\tsending: null,\n\t\tmessages: [],\n\t\tfetch: () => {},\n\t\tpost: () => {}\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tphoto: null,\n\t\t\tphotos: [],\n\t\t\tmessageText: ''\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.fetch();\n\t\tthis.timer = setInterval(() => {\n\t\t\tthis.props.fetch();\n\t\t}, 10000);\n\t\tconst self = this;\n\t\tself.$f7ready(() => {\n\t\t\tself.messagebar = self.messagebarComponent.f7Messagebar;\n\t\t\tself.messages = self.messagesComponent.f7Messages;\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.timer);\n\t}\n\n\tisFirstMessage(message, index) {\n\t\tconst self = this;\n\t\tconst previousMessage = self.props.messages[index - 1];\n\t\tif (message.isTitle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!previousMessage || previousMessage.type !== message.type || previousMessage.name !== message.name) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisLastMessage(message, index) {\n\t\tconst self = this;\n\t\tconst nextMessage = self.props.messages[index + 1];\n\t\tif (message.isTitle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!nextMessage || nextMessage.type !== message.type || nextMessage.name !== message.name) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisTailMessage(message, index) {\n\t\tconst self = this;\n\t\tconst nextMessage = self.props.messages[index + 1];\n\t\tif (message.isTitle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!nextMessage || nextMessage.type !== message.type || nextMessage.name !== message.name) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tsendMessage = async () => {\n\t\tconst {photo} = this.state;\n\t\tconst status = this.messagebar.getValue();\n\n\t\tif (!status) {\n\t\t\tthis.$f7.dialog.alert('信息发送失败，请输入信息内容！');\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {status};\n\t\tif (photo) {\n\t\t\tparams.photo = photo.file;\n\t\t}\n\n\t\ttry {\n\t\t\tconst result = await this.props.post(params);\n\t\t\tif (result.error) {\n\t\t\t\tthis.$f7.dialog.alert(result.error);\n\t\t\t} else {\n\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\tfileDOM.value = '';\n\t\t\t\tthis.messagebar.clear();\n\t\t\t\tthis.setState({photo: null});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (photo) {\n\t\t\t\tthis.$f7.dialog.alert('图片文件过大');\n\t\t\t} else {\n\t\t\t\tthis.$f7.dialog.alert('发送失败');\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {loading, sending, messages} = this.props;\n\t\tconst {photo, photos, messageText} = this.state;\n\t\tconst messageStyle = window.innerWidth > 400 ? {\n\t\t\tmaxWidth: 300\n\t\t} : null;\n\n\t\treturn (\n\t\t\t<Page name=\"messages\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"file\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\"image/gif, image/jpeg, image/png, image/jpg\"\n\t\t\t\t\tstyle={{display: 'none'}}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\t\t\tconst [file] = fileDOM.files;\n\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\treader.addEventListener('load', e => {\n\t\t\t\t\t\t\t\tconst {result: url} = e.target;\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tphoto: {file, url}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t{photos.length > 0 ? (\n\t\t\t\t\t<PhotoBrowser\n\t\t\t\t\t\tref={el => {\n\t\t\t\t\t\t\tthis.photoBrowser = el;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tnavbar={false}\n\t\t\t\t\t\ttoolbar={false}\n\t\t\t\t\t\tphotos={photos}\n\t\t\t\t\t\tvalue={messageText}\n\t\t\t\t\t\tonPhotoBrowserClose={() => {\n\t\t\t\t\t\t\tthis.setState({photos: []});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\n\t\t\t\t<Messagebar\n\t\t\t\t\tref={el => {\n\t\t\t\t\t\tthis.messagebarComponent = el;\n\t\t\t\t\t}}\n\t\t\t\t\tattachmentsVisible={Boolean(photo)}\n\t\t\t\t\tsheetVisible={this.state.sheetVisible}\n\t\t\t\t\tonInput={e => {\n\t\t\t\t\t\tthis.setState({messageText: e.target.value});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Link\n\t\t\t\t\t\ticonAurora=\"f7:camera_fill\"\n\t\t\t\t\t\ticonIos=\"f7:camera_fill\"\n\t\t\t\t\t\ticonMd=\"material:camera_alt\"\n\t\t\t\t\t\tslot=\"inner-start\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (sending) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\t\t\t\tfileDOM.click();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Link\n\t\t\t\t\t\ticonAurora=\"f7:more_round_fill\"\n\t\t\t\t\t\ticonIos=\"f7:more_round_fill\"\n\t\t\t\t\t\ticonMd=\"material:more_vert\"\n\t\t\t\t\t\tslot=\"inner-start\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (sending) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.$f7router.navigate('/settings/');\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Link\n\t\t\t\t\t\ticonAurora=\"f7:arrow_up_round_fill\"\n\t\t\t\t\t\ticonIos=\"f7:arrow_up_round_fill\"\n\t\t\t\t\t\ticonMd=\"material:send\"\n\t\t\t\t\t\tslot=\"inner-end\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (sending) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.sendMessage();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<MessagebarAttachments>\n\t\t\t\t\t\t{photo ? (\n\t\t\t\t\t\t\t<MessagebarAttachment\n\t\t\t\t\t\t\t\timage={photo.url}\n\t\t\t\t\t\t\t\tonAttachmentDelete={() => {\n\t\t\t\t\t\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\t\t\t\t\t\tfileDOM.value = '';\n\t\t\t\t\t\t\t\t\tthis.setState({photo: null});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</MessagebarAttachments>\n\t\t\t\t</Messagebar>\n\n\t\t\t\t<Messages\n\t\t\t\t\tref={el => {\n\t\t\t\t\t\tthis.messagesComponent = el;\n\t\t\t\t\t}}\n\t\t\t\t\tscrollMessagesOnEdge\n\t\t\t\t>\n\t\t\t\t\t{messages.map((message, index) => (\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\tkey={message.id}\n\t\t\t\t\t\t\ttype={message.type}\n\t\t\t\t\t\t\tstyle={message.image ? messageStyle : null}\n\t\t\t\t\t\t\timage={message.image}\n\t\t\t\t\t\t\tname={message.name}\n\t\t\t\t\t\t\tavatar={message.avatar}\n\t\t\t\t\t\t\tfirst={this.isFirstMessage(message, index)}\n\t\t\t\t\t\t\tlast={this.isLastMessage(message, index)}\n\t\t\t\t\t\t\ttail={this.isTailMessage(message, index)}\n\t\t\t\t\t\t\tonClickBubble={() => {\n\t\t\t\t\t\t\t\tif (message.image) {\n\t\t\t\t\t\t\t\t\tthis.setState({photos: [message.image]}, () => {\n\t\t\t\t\t\t\t\t\t\tthis.photoBrowser.open();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{message.text && (\n\t\t\t\t\t\t\t\t<span slot=\"text\">{message.text}</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Message>\n\t\t\t\t\t))}\n\t\t\t\t\t{loading && (\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\ttyping\n\t\t\t\t\t\t\tfirst\n\t\t\t\t\t\t\tlast\n\t\t\t\t\t\t\ttail\n\t\t\t\t\t\t\ttype=\"received\"\n\t\t\t\t\t\t\theader={loading.header}\n\t\t\t\t\t\t\tavatar={loading.avatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Messages>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\treturn {\n\t\tsending: state.homeTimeline.sending,\n\t\tloading: state.homeTimeline.loading,\n\t\tmessages: state.homeTimeline.timeline,\n\t\tsettings: state.settings\n\t};\n};\n\nconst mapDispatch = dispatch => {\n\treturn {\n\t\tfetch: opt => dispatch.homeTimeline.fetch(opt),\n\t\tpost: opt => dispatch.homeTimeline.post(opt)\n\t};\n};\n\nexport default connect(mapState, mapDispatch)(FanfouMessages);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {PropTypes} from 'prop-types';\nimport {Page, BlockTitle, List, ListButton, Navbar, NavLeft, NavTitle, Block, Link} from 'framework7-react';\nimport githubBadge from '../assets/github.svg';\n\nclass FanfouSettings extends React.Component {\n\tstatic propTypes = {\n\t\tlogout: PropTypes.func,\n\t\tclearTimeline: PropTypes.func\n\t}\n\n\tstatic defaultProps = {\n\t\tlogout: () => {},\n\t\tclearTimeline: () => {}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page main>\n\t\t\t\t<Navbar>\n\t\t\t\t\t<NavLeft backLink=\"back\"/>\n\t\t\t\t\t<NavTitle>Settings</NavTitle>\n\t\t\t\t</Navbar>\n\n\t\t\t\t<BlockTitle>ACCOUNT</BlockTitle>\n\t\t\t\t<List>\n\t\t\t\t\t<ListButton\n\t\t\t\t\t\ttitle=\"Logout\"\n\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.$f7router.back('/login/', {\n\t\t\t\t\t\t\t\tforce: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlocalStorage.removeItem('accounts');\n\t\t\t\t\t\t\tthis.props.logout();\n\t\t\t\t\t\t\tthis.props.clearTimeline();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</List>\n\t\t\t\t<Block style={{textAlign: 'center'}}>\n\t\t\t\t\t<Link external href=\"https://github.com/LitoMore/x-fan\" target=\"_blank\">\n\t\t\t\t\t\t<img alt=\"github-badge\" src={githubBadge}/>\n\t\t\t\t\t</Link>\n\t\t\t\t</Block>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\treturn {\n\t\tsettings: state.settings\n\t};\n};\n\nconst mapDispatch = dispatch => {\n\treturn {\n\t\tlogout: () => dispatch.user.logout(),\n\t\tclearTimeline: () => dispatch.homeTimeline.clearTimeline()\n\t};\n};\n\nexport default connect(mapState, mapDispatch)(FanfouSettings);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {App, View} from 'framework7-react';\nimport Login from './pages/login';\nimport Messages from './pages/messages';\nimport Settings from './pages/settings';\n\nconst f7Params = {\n\tname: 'X-FAN',\n\tid: 'com.litomore.xfanfou',\n\troutes: [\n\t\t{\n\t\t\tname: 'messages',\n\t\t\tpath: '/messages/',\n\t\t\tcomponent: Messages\n\t\t}, {\n\t\t\tname: 'login',\n\t\t\tpath: '/login/',\n\t\t\tcomponent: Login\n\t\t}, {\n\t\t\tname: 'settings',\n\t\t\tpath: '/settings/',\n\t\t\tcomponent: Settings\n\t\t}\n\t],\n\ttheme: window.navigator.platform === 'MacIntel' ? 'ios' : 'auto'\n};\n\nclass FanfouApp extends React.Component {\n\tstatic propTypes = {\n\t\tcurrent: PropTypes.object\n\t}\n\n\tstatic defaultProps = {\n\t\tcurrent: null\n\t}\n\n\trender() {\n\t\tconst {current} = this.props;\n\n\t\treturn (\n\t\t\t<App params={f7Params}>\n\t\t\t\t<View main url={current ? '/messages/' : '/login/'}/>\n\t\t\t</App>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\tconst [current] = state.user.accounts;\n\treturn {\n\t\tcurrent,\n\t\tsettings: state.settings\n\t};\n};\n\nexport default connect(mapState)(FanfouApp);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n// [::1] is the IPv6 localhost address.\nwindow.location.hostname === '[::1]' ||\n// 127.0.0.1/8 is considered localhost for IPv4.\nwindow.location.hostname.match(\n\t/^127(?:\\.(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)){3}$/\n)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', async () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tawait navigator.serviceWorker.ready;\n\t\t\t\tconsole.log(\n\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nasync function registerValidSW(swUrl, config) {\n\ttry {\n\t\tconst registration = await navigator.serviceWorker.register(swUrl);\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t} catch (error) {\n\t\tconsole.error('Error during service worker registration:', error);\n\t}\n}\n\nasync function checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\ttry {\n\t\tconst response = await fetch(swUrl);\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tif (\n\t\t\tresponse.status === 404 ||\nresponse.headers.get('content-type').indexOf('javascript') === -1\n\t\t) {\n\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tconst registration = await navigator.serviceWorker.ready;\n\t\t\tawait registration.unregister();\n\t\t\twindow.location.reload();\n\t\t} else {\n\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t} catch {\n\t\tconsole.log(\n\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t);\n\t}\n}\n\nexport async function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tconst registration = await navigator.serviceWorker.ready;\n\t\tregistration.unregister();\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {init} from '@rematch/core';\nimport {Provider} from 'react-redux';\nimport F7 from 'framework7/framework7.esm.bundle';\nimport F7React from 'framework7-react';\nimport * as models from './rematch';\nimport App from './app';\nimport * as serviceWorker from './service-worker';\nimport 'framework7/css/framework7.bundle.min.css';\nimport 'framework7-icons/css/framework7-icons.css';\nimport 'material-design-icons-iconfont/dist/material-design-icons.css';\nimport './index.css';\n\n// Framework7 initialize\nF7.use(F7React);\n\n// Generate Redux store\nconst store = init({\n\tmodels\n});\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App/>\n\t</Provider>,\n\tdocument.querySelector('#app')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}