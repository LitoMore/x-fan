{"version":3,"sources":["pages/assets/github.svg","utils/account.js","utils/fanfou.js","config/fanfou.config.js","rematch/user.js","rematch/home-timeline.js","rematch/settings.js","pages/login/index.js","pages/messages/index.js","pages/settings/index.js","app.js","service-worker.js","index.js"],"names":["module","exports","getAccounts","accounts","JSON","parse","localStorage","getItem","_","opt","consumerKey","consumerSecret","apiDomain","oauthDomain","hooks","baseString","baseStr","replace","xauth","username","password","a","x","Fanfou","token","oauthToken","oauthTokenSecret","o","get","profile","initFanfou","length","getHomeTimeline","format","count","postStatus","ff","photo","upload","post","user","state","reducers","addAccount","auth","slice","filter","item","unique_id","unshift","setItem","stringify","logout","effects","login","account","this","ignoredStatus","text","includes","Number","isInteger","homeTimeline","loading","sending","typing","timeline","setLoading","setSending","setTimeline","appendStatus","status","concat","clearTimeline","fetch","tl","header","avatar","latestTimeline","reverse","lastStatusId","rawId","isOrigin","rawid","messages","forEach","push","id","type","is_self","profile_image_url_large","name","image","originurl","plain_text","latest","last","letterCount","time","parseInt","setTimeout","error","localSettings","settings","updateSettings","FanfouLogin","props","$f7","dialog","alert","$f7router","navigate","clearPreviousHistory","noToolbar","noNavbar","noSwipeback","loginScreen","form","label","placeholder","onInput","e","setState","target","value","onClick","React","Component","defaultProps","connect","current","dispatch","FanfouMessages","photos","messageText","sendMessage","messagebar","getValue","params","file","result","document","querySelector","clear","timer","setInterval","self","$f7ready","messagebarComponent","f7Messagebar","messagesComponent","f7Messages","clearInterval","message","index","previousMessage","isTitle","nextMessage","messageStyle","window","innerWidth","maxWidth","accept","style","display","onChange","fileDOM","files","reader","FileReader","addEventListener","url","readAsDataURL","ref","el","photoBrowser","navbar","toolbar","onPhotoBrowserClose","attachmentsVisible","Boolean","sheetVisible","iconAurora","iconIos","iconMd","slot","click","onAttachmentDelete","scrollMessagesOnEdge","map","key","first","isFirstMessage","isLastMessage","tail","isTailMessage","onClickBubble","open","FanfouSettings","main","backLink","title","color","back","force","removeItem","textAlign","external","href","alt","src","githubBadge","f7Params","routes","path","component","Messages","Login","theme","navigator","platform","FanfouApp","isLocalhost","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","checkValidServiceWorker","response","headers","ready","unregister","reload","F7","use","F7React","store","init","models","ReactDOM","render","URL","process","origin"],"mappings":"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","file":"static/js/main.459c4c1a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/github.5a5753ed.svg\";","export const getAccounts = () => {\n\tlet accounts = [];\n\ttry {\n\t\taccounts = JSON.parse(localStorage.getItem('accounts'));\n\t} catch (_) {}\n\n\treturn accounts;\n};\n\nexport const addAccount = account => {\n\tconst accounts = getAccounts();\n\tconst found = accounts.find(item => {\n\t\treturn item.token.oauthToken === account.token.oauthToken && item.token.oauthTokenSecret === account.token.oauthTokenSecret;\n\t});\n\tif (found) {\n\t\treturn;\n\t}\n\n\taccounts.push(account);\n\tlocalStorage.setItem('accounts', JSON.stringify(accounts));\n};\n","import Fanfou from 'fanfou-sdk-browser';\nimport {consumerKey, consumerSecret} from '../config/fanfou.config';\nimport {getAccounts} from './account';\n\nconst apiDomain = 'cors.fanfou.com';\nconst oauthDomain = 'cors.fanfou.com';\nconst hooks = {\n\tbaseString: baseStr => {\n\t\treturn baseStr\n\t\t\t.replace('%2F%2Fcors.fanfou.com%2Foauth', 'http%3A%2F%2Ffanfou.com%2Foauth')\n\t\t\t.replace('%2F%2Fcors.fanfou.com', 'http%3A%2F%2Fapi.fanfou.com');\n\t}\n};\nconst opt = {consumerKey, consumerSecret, apiDomain, oauthDomain, hooks};\n\nexport const xauth = async (username, password) => {\n\tconst x = new Fanfou({\n\t\t...opt,\n\t\tusername,\n\t\tpassword\n\t});\n\tconst token = await x.xauth();\n\tconst {oauthToken, oauthTokenSecret} = token;\n\tif (oauthToken && oauthTokenSecret) {\n\t\tconst o = new Fanfou({\n\t\t\t...opt,\n\t\t\toauthToken,\n\t\t\toauthTokenSecret\n\t\t});\n\t\tconst profile = await o.get('/account/verify_credentials', {});\n\t\treturn {token, profile};\n\t}\n\n\treturn null;\n};\n\nconst initFanfou = () => {\n\tconst accounts = getAccounts();\n\tif (accounts.length === 0) {\n\t\treturn;\n\t}\n\n\tconst [user] = accounts;\n\tconst {oauthToken, oauthTokenSecret} = user.token;\n\tconst ff = new Fanfou({\n\t\t...opt,\n\t\toauthToken,\n\t\toauthTokenSecret\n\t});\n\treturn ff;\n};\n\nexport const getHomeTimeline = opt => {\n\tconst ff = initFanfou();\n\treturn ff.get('/statuses/home_timeline', {...opt, format: 'html', count: 30});\n};\n\nexport const postStatus = opt => {\n\tconst ff = initFanfou();\n\tif (opt.photo) {\n\t\treturn ff.upload('/photos/upload', {...opt});\n\t}\n\n\treturn ff.post('/statuses/update', {...opt});\n};\n","export const consumerKey = 'a59ed1e1d9c84ece4d90a6bef1ef30b2';\nexport const consumerSecret = 'aba384864b00fe9f3ed8ece4d21556cd';\n","import {xauth} from '../utils/fanfou';\n\n// Read accounts from localStorage\nlet accounts = [];\ntry {\n\taccounts = JSON.parse(localStorage.getItem('accounts')) || [];\n} catch (_) {}\n\nexport const user = {\n\tstate: {accounts},\n\treducers: {\n\t\taddAccount(state, auth) {\n\t\t\tlet accounts = state.accounts.slice();\n\t\t\taccounts = accounts.filter(item => {\n\t\t\t\treturn item.profile.unique_id !== auth.profile.unique_id;\n\t\t\t});\n\t\t\taccounts.unshift(auth);\n\t\t\tlocalStorage.setItem('accounts', JSON.stringify(accounts));\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taccounts\n\t\t\t};\n\t\t},\n\t\tlogout() {\n\t\t\treturn {\n\t\t\t\taccounts: []\n\t\t\t};\n\t\t}\n\t},\n\teffects: {\n\t\tasync login(account) {\n\t\t\tconst {username, password} = account;\n\t\t\tconst auth = await xauth(username, password);\n\t\t\tif (auth) {\n\t\t\t\tthis.addAccount(auth);\n\t\t\t}\n\n\t\t\treturn auth;\n\t\t}\n\t}\n};\n","import {getHomeTimeline, postStatus} from '../utils/fanfou';\n\nconst ignoredStatus = text => {\n\tconst ignoreList = ['', '.', '上传了新照片'];\n\tif (ignoreList.includes(text)) {\n\t\treturn true;\n\t}\n\n\tif (Number.isInteger(Number(text))) {\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n// Home Timeline\nexport const homeTimeline = {\n\tstate: {\n\t\tloading: null,\n\t\tsending: null,\n\t\ttyping: false,\n\t\ttimeline: []\n\t},\n\treducers: {\n\t\tsetLoading(state, loading) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading\n\t\t\t};\n\t\t},\n\t\tsetSending(state, sending) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsending\n\t\t\t};\n\t\t},\n\t\tsetTimeline(state, timeline) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimeline\n\t\t\t};\n\t\t},\n\t\tappendStatus(state, status) {\n\t\t\tconst timeline = state.timeline.concat(status);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimeline\n\t\t\t};\n\t\t},\n\t\tclearTimeline() {\n\t\t\treturn {\n\t\t\t\tloading: null,\n\t\t\t\tsending: null,\n\t\t\t\ttyping: false,\n\t\t\t\ttimeline: []\n\t\t\t};\n\t\t}\n\t},\n\teffects: {\n\t\tasync fetch(opt, state) {\n\t\t\tconst {timeline: tl} = state.homeTimeline;\n\t\t\tif (tl.length === 0) {\n\t\t\t\tthis.setLoading({\n\t\t\t\t\theader: 'Loading',\n\t\t\t\t\tavatar: '/x-fan.png'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Fetch the latest timeline state\n\t\t\tlet timeline = await getHomeTimeline(opt);\n\t\t\tconst {timeline: latestTimeline} = state.homeTimeline;\n\t\t\tconst [{rawId: lastStatusId} = {rawId: 0}] = latestTimeline.slice().reverse();\n\t\t\ttimeline = timeline.filter(status => status.isOrigin() && status.rawid > lastStatusId);\n\t\t\tlet messages = latestTimeline.slice();\n\n\t\t\ttimeline\n\t\t\t\t.reverse()\n\t\t\t\t.forEach(status => {\n\t\t\t\t\tif (status.photo) {\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tid: status.id + '-photo',\n\t\t\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\t\t\tavatar: status.user.profile_image_url_large,\n\t\t\t\t\t\t\tname: status.user.name,\n\t\t\t\t\t\t\timage: status.photo.originurl\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!ignoredStatus(status.text)) {\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tid: status.id,\n\t\t\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\t\t\tname: status.user.name,\n\t\t\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\t\t\ttext: status.plain_text,\n\t\t\t\t\t\t\tavatar: status.user.profile_image_url_large\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t// Only display 200 statuses\n\t\t\tmessages = messages.slice(-200);\n\n\t\t\tif (tl.length === 0) {\n\t\t\t\tthis.setLoading(null);\n\t\t\t\tthis.setTimeline(messages);\n\t\t\t} else {\n\t\t\t\tconst latest = messages[messages.length - 1].rawId;\n\t\t\t\tconst last = tl[tl.length - 1].rawId;\n\t\t\t\tif (latest > last) {\n\t\t\t\t\tconst letterCount = messages[messages.length - 1].text.length;\n\t\t\t\t\tconst time = 1000 + parseInt((letterCount + 1) / 140 * 4000, 10);\n\t\t\t\t\tthis.setLoading({\n\t\t\t\t\t\theader: messages[messages.length - 1].name,\n\t\t\t\t\t\tavatar: messages[messages.length - 1].avatar\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.setLoading(null);\n\t\t\t\t\t\tthis.setTimeline(messages);\n\t\t\t\t\t}, time);\n\t\t\t\t} else {\n\t\t\t\t\treturn messages;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn messages;\n\t\t},\n\t\tasync post(opt) {\n\t\t\tthis.setSending(opt);\n\t\t\tconst status = await postStatus({...opt});\n\t\t\tif (status.error) {\n\t\t\t\tthis.setSending(null);\n\t\t\t\treturn status;\n\t\t\t}\n\n\t\t\tconst messages = [];\n\t\t\tif (status.photo) {\n\t\t\t\tmessages.push({\n\t\t\t\t\tid: status.id + '-photo',\n\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\tavatar: status.user.profile_image_url_large,\n\t\t\t\t\tname: status.user.name,\n\t\t\t\t\timage: status.photo.originurl\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!ignoredStatus(status.text)) {\n\t\t\t\tmessages.push({\n\t\t\t\t\tid: status.id,\n\t\t\t\t\trawId: status.rawid,\n\t\t\t\t\tname: status.user.name,\n\t\t\t\t\ttype: status.is_self ? 'sent' : 'received',\n\t\t\t\t\ttext: status.plain_text,\n\t\t\t\t\tavatar: status.user.profile_image_url_large\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.setSending(null);\n\t\t\tthis.appendStatus(messages);\n\t\t\treturn messages;\n\t\t}\n\t}\n};\n","const defaultSettings = {};\n\n// Get settings from localStorage\nlet localSettings = {};\ntry {\n\tlocalSettings = JSON.parse(localStorage.getItem('settings') || {});\n} catch (_) {}\n\nexport const settings = {\n\tstate: {\n\t\t...defaultSettings,\n\t\t...localSettings\n\t},\n\treducers: {\n\t\tupdateSettings(state) {\n\t\t\tlocalStorage.setItem('settings', JSON.stringify(state));\n\t\t\treturn state;\n\t\t}\n\t},\n\teffects: {}\n};\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {Page, LoginScreenTitle, List, ListInput, ListButton, BlockFooter} from 'framework7-react';\n\nclass FanfouLogin extends React.Component {\n\tstatic propTypes = {\n\t\tlogin: PropTypes.func\n\t}\n\n\tstatic defaultProps = {\n\t\tlogin: () => {}\n\t}\n\n\tstate = {\n\t\tusername: '',\n\t\tpassword: ''\n\t};\n\n\tlogin = async () => {\n\t\tconst {username, password} = this.state;\n\t\tconst {login} = this.props;\n\t\tconst auth = await login({username, password});\n\n\t\tif (!(username && password)) {\n\t\t\tthis.$f7.dialog.alert('Username and password do not match');\n\t\t\treturn;\n\t\t}\n\n\t\tif (auth === null) {\n\t\t\tthis.$f7.dialog.alert('Username and password do not match');\n\t\t} else {\n\t\t\tthis.$f7router.navigate('/messages/', {\n\t\t\t\tclearPreviousHistory: true\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page noToolbar noNavbar noSwipeback loginScreen>\n\t\t\t\t<LoginScreenTitle>X-FAN</LoginScreenTitle>\n\t\t\t\t<List form>\n\t\t\t\t\t<ListInput\n\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Your username\"\n\t\t\t\t\t\tonInput={e => {\n\t\t\t\t\t\t\tthis.setState({username: e.target.value});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<ListInput\n\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Your password\"\n\t\t\t\t\t\tonInput={e => {\n\t\t\t\t\t\t\tthis.setState({password: e.target.value});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</List>\n\t\t\t\t<List>\n\t\t\t\t\t<ListButton onClick={this.login}>Sign In</ListButton>\n\t\t\t\t\t{/* eslint-disable-next-line */}\n\t\t\t\t\t<BlockFooter>Code with ❤️️ by LitoMore</BlockFooter>\n\t\t\t\t</List>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\tconst [current = {}] = state.user.accounts;\n\treturn {\n\t\tcurrent\n\t};\n};\n\nconst mapDispatch = dispatch => {\n\treturn {\n\t\tlogin: account => dispatch.user.login(account)\n\t};\n};\n\nexport default connect(mapState, mapDispatch)(FanfouLogin);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {Page, Messages, Message, Messagebar, Link, MessagebarAttachments, MessagebarAttachment, PhotoBrowser} from 'framework7-react';\n\nclass FanfouMessages extends React.Component {\n\tstatic propTypes = {\n\t\tloading: PropTypes.object,\n\t\tsending: PropTypes.object,\n\t\tmessages: PropTypes.array,\n\t\tfetch: PropTypes.func,\n\t\tpost: PropTypes.func\n\t}\n\n\tstatic defaultProps = {\n\t\tloading: null,\n\t\tsending: null,\n\t\tmessages: [],\n\t\tfetch: () => {},\n\t\tpost: () => {}\n\t}\n\n\tstate = {\n\t\tphoto: null,\n\t\tphotos: [],\n\t\tmessageText: ''\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.fetch();\n\t\tthis.timer = setInterval(() => {\n\t\t\tthis.props.fetch();\n\t\t}, 10000);\n\t\tconst self = this;\n\t\tself.$f7ready(() => {\n\t\t\tself.messagebar = self.messagebarComponent.f7Messagebar;\n\t\t\tself.messages = self.messagesComponent.f7Messages;\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.timer);\n\t}\n\n\tisFirstMessage(message, index) {\n\t\tconst self = this;\n\t\tconst previousMessage = self.props.messages[index - 1];\n\t\tif (message.isTitle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!previousMessage || previousMessage.type !== message.type || previousMessage.name !== message.name) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisLastMessage(message, index) {\n\t\tconst self = this;\n\t\tconst nextMessage = self.props.messages[index + 1];\n\t\tif (message.isTitle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!nextMessage || nextMessage.type !== message.type || nextMessage.name !== message.name) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisTailMessage(message, index) {\n\t\tconst self = this;\n\t\tconst nextMessage = self.props.messages[index + 1];\n\t\tif (message.isTitle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!nextMessage || nextMessage.type !== message.type || nextMessage.name !== message.name) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tsendMessage = async () => {\n\t\tconst {photo} = this.state;\n\t\tconst status = this.messagebar.getValue();\n\n\t\tif (!status) {\n\t\t\tthis.$f7.dialog.alert('信息发送失败，请输入信息内容！');\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {status};\n\t\tif (photo) {\n\t\t\tparams.photo = photo.file;\n\t\t}\n\n\t\ttry {\n\t\t\tconst result = await this.props.post(params);\n\t\t\tif (result.error) {\n\t\t\t\tthis.$f7.dialog.alert(result.error);\n\t\t\t} else {\n\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\tfileDOM.value = '';\n\t\t\t\tthis.messagebar.clear();\n\t\t\t\tthis.setState({photo: null});\n\t\t\t}\n\t\t} catch (_) {\n\t\t\tif (photo) {\n\t\t\t\tthis.$f7.dialog.alert('图片文件过大');\n\t\t\t} else {\n\t\t\t\tthis.$f7.dialog.alert('发送失败');\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {loading, sending, messages} = this.props;\n\t\tconst {photo, photos, messageText} = this.state;\n\t\tconst messageStyle = window.innerWidth > 400 ? {\n\t\t\tmaxWidth: 300\n\t\t} : null;\n\n\t\treturn (\n\t\t\t<Page name=\"messages\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"file\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\"image/gif, image/jpeg, image/png, image/jpg\"\n\t\t\t\t\tstyle={{display: 'none'}}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\t\t\tconst [file] = fileDOM.files;\n\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\treader.addEventListener('load', e => {\n\t\t\t\t\t\t\t\tconst {result: url} = e.target;\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tphoto: {file, url}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t{photos.length > 0 ? (\n\t\t\t\t\t<PhotoBrowser\n\t\t\t\t\t\tref={el => {\n\t\t\t\t\t\t\tthis.photoBrowser = el;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tnavbar={false}\n\t\t\t\t\t\ttoolbar={false}\n\t\t\t\t\t\tphotos={photos}\n\t\t\t\t\t\tvalue={messageText}\n\t\t\t\t\t\tonPhotoBrowserClose={() => {\n\t\t\t\t\t\t\tthis.setState({photos: []});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\n\t\t\t\t<Messagebar\n\t\t\t\t\tref={el => {\n\t\t\t\t\t\tthis.messagebarComponent = el;\n\t\t\t\t\t}}\n\t\t\t\t\tattachmentsVisible={Boolean(photo)}\n\t\t\t\t\tsheetVisible={this.state.sheetVisible}\n\t\t\t\t\tonInput={e => {\n\t\t\t\t\t\tthis.setState({messageText: e.target.value});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Link\n\t\t\t\t\t\ticonAurora=\"f7:camera_fill\"\n\t\t\t\t\t\ticonIos=\"f7:camera_fill\"\n\t\t\t\t\t\ticonMd=\"material:camera_alt\"\n\t\t\t\t\t\tslot=\"inner-start\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (sending) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\t\t\t\tfileDOM.click();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Link\n\t\t\t\t\t\ticonAurora=\"f7:ellipsis_circle_fill\"\n\t\t\t\t\t\ticonIos=\"f7:ellipsis_circle_fill\"\n\t\t\t\t\t\ticonMd=\"material:more_vert\"\n\t\t\t\t\t\tslot=\"inner-start\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (sending) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.$f7router.navigate('/settings/');\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Link\n\t\t\t\t\t\ticonAurora=\"f7:arrow_up_circle_fill\"\n\t\t\t\t\t\ticonIos=\"f7:arrow_up_circle_fill\"\n\t\t\t\t\t\ticonMd=\"material:send\"\n\t\t\t\t\t\tslot=\"inner-end\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (sending) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.sendMessage();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<MessagebarAttachments>\n\t\t\t\t\t\t{photo ? (\n\t\t\t\t\t\t\t<MessagebarAttachment\n\t\t\t\t\t\t\t\timage={photo.url}\n\t\t\t\t\t\t\t\tonAttachmentDelete={() => {\n\t\t\t\t\t\t\t\t\tconst fileDOM = document.querySelector('#file');\n\t\t\t\t\t\t\t\t\tfileDOM.value = '';\n\t\t\t\t\t\t\t\t\tthis.setState({photo: null});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</MessagebarAttachments>\n\t\t\t\t</Messagebar>\n\n\t\t\t\t<Messages\n\t\t\t\t\tref={el => {\n\t\t\t\t\t\tthis.messagesComponent = el;\n\t\t\t\t\t}}\n\t\t\t\t\tscrollMessagesOnEdge\n\t\t\t\t>\n\t\t\t\t\t{messages.map((message, index) => (\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\tkey={message.id}\n\t\t\t\t\t\t\ttype={message.type}\n\t\t\t\t\t\t\tstyle={message.image ? messageStyle : null}\n\t\t\t\t\t\t\timage={message.image}\n\t\t\t\t\t\t\tname={message.name}\n\t\t\t\t\t\t\tavatar={message.avatar}\n\t\t\t\t\t\t\tfirst={this.isFirstMessage(message, index)}\n\t\t\t\t\t\t\tlast={this.isLastMessage(message, index)}\n\t\t\t\t\t\t\ttail={this.isTailMessage(message, index)}\n\t\t\t\t\t\t\tonClickBubble={() => {\n\t\t\t\t\t\t\t\tif (message.image) {\n\t\t\t\t\t\t\t\t\tthis.setState({photos: [message.image]}, () => {\n\t\t\t\t\t\t\t\t\t\tthis.photoBrowser.open();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{message.text && (\n\t\t\t\t\t\t\t\t<span slot=\"text\">{message.text}</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Message>\n\t\t\t\t\t))}\n\t\t\t\t\t{loading && (\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\ttyping\n\t\t\t\t\t\t\tfirst\n\t\t\t\t\t\t\tlast\n\t\t\t\t\t\t\ttail\n\t\t\t\t\t\t\ttype=\"received\"\n\t\t\t\t\t\t\theader={loading.header}\n\t\t\t\t\t\t\tavatar={loading.avatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Messages>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\treturn {\n\t\tsending: state.homeTimeline.sending,\n\t\tloading: state.homeTimeline.loading,\n\t\tmessages: state.homeTimeline.timeline,\n\t\tsettings: state.settings\n\t};\n};\n\nconst mapDispatch = dispatch => {\n\treturn {\n\t\tfetch: opt => dispatch.homeTimeline.fetch(opt),\n\t\tpost: opt => dispatch.homeTimeline.post(opt)\n\t};\n};\n\nexport default connect(mapState, mapDispatch)(FanfouMessages);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {PropTypes} from 'prop-types';\nimport {Page, BlockTitle, List, ListButton, Navbar, NavLeft, NavTitle, Block, Link} from 'framework7-react';\nimport githubBadge from '../assets/github.svg';\n\nclass FanfouSettings extends React.Component {\n\tstatic propTypes = {\n\t\tlogout: PropTypes.func,\n\t\tclearTimeline: PropTypes.func\n\t}\n\n\tstatic defaultProps = {\n\t\tlogout: () => {},\n\t\tclearTimeline: () => {}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page main>\n\t\t\t\t<Navbar>\n\t\t\t\t\t<NavLeft backLink=\"back\"/>\n\t\t\t\t\t<NavTitle>Settings</NavTitle>\n\t\t\t\t</Navbar>\n\n\t\t\t\t<BlockTitle>ACCOUNT</BlockTitle>\n\t\t\t\t<List>\n\t\t\t\t\t<ListButton\n\t\t\t\t\t\ttitle=\"Logout\"\n\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.$f7router.back('/login/', {\n\t\t\t\t\t\t\t\tforce: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlocalStorage.removeItem('accounts');\n\t\t\t\t\t\t\tthis.props.logout();\n\t\t\t\t\t\t\tthis.props.clearTimeline();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</List>\n\t\t\t\t<Block style={{textAlign: 'center'}}>\n\t\t\t\t\t<Link external href=\"https://github.com/LitoMore/x-fan\" target=\"_blank\">\n\t\t\t\t\t\t<img alt=\"github-badge\" src={githubBadge}/>\n\t\t\t\t\t</Link>\n\t\t\t\t</Block>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\treturn {\n\t\tsettings: state.settings\n\t};\n};\n\nconst mapDispatch = dispatch => {\n\treturn {\n\t\tlogout: () => dispatch.user.logout(),\n\t\tclearTimeline: () => dispatch.homeTimeline.clearTimeline()\n\t};\n};\n\nexport default connect(mapState, mapDispatch)(FanfouSettings);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {App, View} from 'framework7-react';\nimport Login from './pages/login';\nimport Messages from './pages/messages';\nimport Settings from './pages/settings';\n\nconst f7Params = {\n\tname: 'X-FAN',\n\tid: 'com.litomore.xfanfou',\n\troutes: [\n\t\t{\n\t\t\tname: 'messages',\n\t\t\tpath: '/messages/',\n\t\t\tcomponent: Messages\n\t\t}, {\n\t\t\tname: 'login',\n\t\t\tpath: '/login/',\n\t\t\tcomponent: Login\n\t\t}, {\n\t\t\tname: 'settings',\n\t\t\tpath: '/settings/',\n\t\t\tcomponent: Settings\n\t\t}\n\t],\n\ttheme: window.navigator.platform === 'MacIntel' ? 'ios' : 'auto'\n};\n\nclass FanfouApp extends React.Component {\n\tstatic propTypes = {\n\t\tcurrent: PropTypes.object\n\t}\n\n\tstatic defaultProps = {\n\t\tcurrent: null\n\t}\n\n\trender() {\n\t\tconst {current} = this.props;\n\n\t\treturn (\n\t\t\t<App params={f7Params}>\n\t\t\t\t<View main url={current ? '/messages/' : '/login/'}/>\n\t\t\t</App>\n\t\t);\n\t}\n}\n\nconst mapState = state => {\n\tconst [current] = state.user.accounts;\n\treturn {\n\t\tcurrent,\n\t\tsettings: state.settings\n\t};\n};\n\nexport default connect(mapState)(FanfouApp);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n// [::1] is the IPv6 localhost address.\nwindow.location.hostname === '[::1]' ||\n// 127.0.0.1/8 is considered localhost for IPv4.\nwindow.location.hostname.match(\n\t/^127(?:\\.(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)){3}$/\n)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', async () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tawait navigator.serviceWorker.ready;\n\t\t\t\tconsole.log(\n\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nasync function registerValidSW(swUrl, config) {\n\ttry {\n\t\tconst registration = await navigator.serviceWorker.register(swUrl);\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t} catch (error) {\n\t\tconsole.error('Error during service worker registration:', error);\n\t}\n}\n\nasync function checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\ttry {\n\t\tconst response = await fetch(swUrl);\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tif (\n\t\t\tresponse.status === 404 ||\n!response.headers.get('content-type').includes('javascript')\n\t\t) {\n\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tconst registration = await navigator.serviceWorker.ready;\n\t\t\tawait registration.unregister();\n\t\t\twindow.location.reload();\n\t\t} else {\n\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t} catch {\n\t\tconsole.log(\n\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t);\n\t}\n}\n\nexport async function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tconst registration = await navigator.serviceWorker.ready;\n\t\tregistration.unregister();\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {init} from '@rematch/core';\nimport {Provider} from 'react-redux';\nimport F7 from 'framework7/framework7.esm.bundle';\nimport F7React from 'framework7-react';\nimport * as models from './rematch';\nimport App from './app';\nimport * as serviceWorker from './service-worker';\nimport 'framework7/css/framework7.bundle.min.css';\nimport 'framework7-icons/css/framework7-icons.css';\nimport 'material-design-icons-iconfont/dist/material-design-icons.css';\nimport './index.css';\n\n// Framework7 initialize\nF7.use(F7React);\n\n// Generate Redux store\nconst store = init({\n\tmodels\n});\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App/>\n\t</Provider>,\n\tdocument.querySelector('#app')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}